<div class="custom-container-fluid p-0">
  <div class="primary-header-container align-items-center d-flex justify-content-between px-3 py-3 ofH_calc_body_header">
    <div>
      <h5 class="primary-header-label">Payment</h5>
    </div>
    <div class="d-flex">
        <div class="filter-container f-c-desk-view">
          <div class="d-flex">
            <div (click)="isVisiblePaymentsFilterDialog = true" class="primary-filter-icon-container">
              <span  class="filter-icon"><i class="fa-solid fa-filter"></i></span>
            </div>
            <div class="primary-global-filter">
              <input type="text" class="form-control" placeholder="Search Here..." (keydown.enter)="onGlobalSearch()" [(ngModel)]="globalSearch">
              <span style="font-size: 0.9rem; width: 19px;" class="c-pointer d-flex" (click)="globalSearch = ''; onGlobalSearch()"><i *ngIf="globalSearch" class="fa-solid fa-xmark pe-2 ps-0"></i></span>
              <span class="magnifying-glass-icon-container" (click)="onGlobalSearch()"><i class="fa-solid fa-magnifying-glass"></i></span>
            </div>
          </div>
        </div>
    </div>
  </div>
  <div>
    <div class="filter-container f-c-mob-view ofH_calc_mob_global_filter">
      <div class="d-flex align-items-center filter-container justify-content-end pe-2 pt-3">
        <div (click)="isVisiblePaymentsFilterDialog = true" class="primary-filter-icon-container">
          <span  class="filter-icon"><i class="fa-solid fa-filter"></i></span>
        </div>
        <div class="primary-global-filter">
          <input type="text" class="form-control" placeholder="Search Here..." (keydown.enter)="onGlobalSearch()" [(ngModel)]="globalSearch">
          <span style="font-size: 0.9rem; width: 19px;" class="c-pointer d-flex" (click)="globalSearch = ''; onGlobalSearch()"><i *ngIf="globalSearch" class="fa-solid fa-xmark pe-2 ps-0"></i></span>
          <span class="magnifying-glass-icon-container" (click)="onGlobalSearch()"><i class="fa-solid fa-magnifying-glass"></i></span>
        </div>
      </div>
    </div>
    <div class="primary-p-table-container" [style]="{ height: getOffsetHeightForPrimaryTable(70)}">
      <app-payment-plan-view-add-edit-form [CustomerPaymentPlan]="customersPaymentPlan" [formMode]="'view'"></app-payment-plan-view-add-edit-form>
    </div>
    <div class="d-flex justify-content-center ofH_calc_pagin px-4" style="width: 100%;">
      <app-table-paginator class="w-100"
        (OnPageChange)="onPageChange($event)"
        [first]="indexOfFirstRecord"
        [rows]="pageSize"
        [totalRecords]="xPagination?.totalCount">
      </app-table-paginator>
    </div>


  </div>
</div>

<p-dialog [draggable]="true" [dismissableMask]="true" [showHeader]="false" class="primary-p-dialog" [modal]="true"
  [position]="'right'" [(visible)]="isVisiblePaymentsFilterDialog" [style]="{ width: popupWidth }">
  <div>
    <div style="border-bottom: 1px solid var(--primary);" class="d-flex align-items-center justify-content-between px-3 py-3">
      <div>
        <span style="font-weight: 700; font-size: 1.1rem; color: #fff;">Filter</span>
      </div>
      <div style="line-height: 1rem;">
        <span (click)="isVisiblePaymentsFilterDialog = false"><i class="fa-solid fa-xmark c-pointer text-white"></i></span>
      </div>
    </div>
    <div class="px-3 py-3"
      [ngStyle]="{ 'height': getOffsetHeightByCustomClass(175, containerOffSetHeightClasses), 'max-width': popupWidth }"
      style="overflow-x: hidden;">
      <app-filter-fields-container [branchOptions]="getBranchOptions" [FilterFields]="filterFields"
        [showFilterFields]="showFilterFields"></app-filter-fields-container>
    </div>
    <div style="border-top: 1px solid var(--primary);" class="d-flex justify-content-end px-3 py-3">
      <button (click)="onFilterClear();" class="custom-dark-form-btn mx-1 px-3 py-1">Clear</button>
      <button (click)="getAllCustomerPaymentPlans(true)" class="mx-1 custom-primary-form-btn mx-1 px-3 py-1">Apply</button>
    </div>
  </div>
</p-dialog>
